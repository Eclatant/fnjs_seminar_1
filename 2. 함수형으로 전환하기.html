<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <title>함수형으로 전환하기</title>
  <script src="js/functional.js"></script>
</head>
<body>

<script>

var products = [
  {
    id: 1,
    name: "반팔티",
    price: 10000,
    sizes: ["L", "XL", "2XL"]
  },
  {
    id: 2,
    name: "후드티",
    price: 31000,
    sizes: ["L", "XL"]
  },
  {
    id: 3,
    name: "맨투맨",
    price: 19000,
    sizes: ["L"]
  },
  {
    id: 4,
    name: "롱패딩",
    price: 110000,
    sizes: ["M", "L"]
  }
];

// 1. 명령형 코드
  // 1) 20,000원 이상인 상품을 거른다.
  var temp_products = [];
  var i = -1, l = products.length;
  while (++i < l) {
    if (products[i].price >= 20000) {
      temp_products.push(products[i]);
    }
  }
  log(temp_products);

  // 2) 20,000원 이상의 상품의 이름을 수집해서 출력한다.
  var names = [];
  var i = -1, l = temp_products.length;
  while (++i < l) {
    names.push(temp_products[i].name);
  }
  log(names);

  // 3) 20,000원 미만인 상품을 거른다.
  var temp_products = [];
  var i = -1, l = products.length;
  while (++i < l) {
    if (products[i].price < 20000) {
      temp_products.push(products[i]);
    }
  }
  log(temp_products);

  // 4) 20,000원 미만인 상품의 가격을 수집해서 출력한다.
  var prices = [];
  var i = -1, l = temp_products.length;
  while (++i < l) {
    prices.push(temp_products[i].price);
  }
  log(prices);

// 2. filter, map으로 리팩토링

  var over_20000 = filter(products, function(product) {
    return product.price >= 20000;
  });
  console.log(over_20000);

  var names = map(over_20000, function(product) {
    return product.name;
  });
  console.log(names);

  var under_20000 = filter(products, function(product) {
    return product.price < 20000;
  });
  console.log(under_20000);

  var prices = map(under_20000, function(product) {
    return product.price;
  });
  console.log(prices);

  log(map(
    log(filter(products, function(product) { return product.price >= 20000; })),
    function(product) { return product.name; }));

  log(map(
    log(filter(products, function(product) { return product.price < 20000; })),
    function(product) { return product.price; }));

// 3. 다형성
  // 1) 외부
    //  - Array.prototype 과 비교
    //  - length
  // 2) 내부

// ------ 50분
// ------ 쉬는시간 5분

// 4. add, add_all, mult, mult_all
// 5. add_all, mult_all에서 reduce 로직 꺼내기

// ------ 1시간 20분
  function add(a, b) {
    return a + b;
  }

  function add_all(list) {
    return reduce(list, add);
  }
  log( add_all([1, 2, 3, 4]) );

  function mult(a, b) {
    return a * b;
  }

  function mult_all(list) {
    return reduce(list, mult);
  }
  log( mult_all([1, 2, 3, 4]) );

  log(reduce([1, 2, 3, 4], add));
  log(reduce([1, 2, 3, 4], mult));

  log(reduce([1, 2, 3, 4], add, 2));
  log(reduce([1, 2, 3, 4], mult, 2));

  reduce([1, 2, 3, 4], add);
  // => add(add(add(1, 2), 3), 4);
</script>

</body>
</html>